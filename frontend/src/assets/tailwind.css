/* Unified palette */
@import "@/styles/palettes.css";
@import "@/styles/status-palette.css";

@tailwind base;
@tailwind components;
@tailwind utilities;

/* Base: apply global colors to body and inputs */
@layer base {
  body { background-color: var(--bg-main); color: var(--body-text); }
  a { color: var(--slate-gray); }
  input, select, textarea { background-color: var(--input-bg); color: var(--body-text); border: 1px solid var(--french-gray); }
  :root { --text: var(--body-text); --border: var(--platinum); --card: var(--card-bg); }
}

/* Utilities bound to unified vars */
@layer utilities {
  /* Elevation */
  .shadow-card    { box-shadow: var(--shadow-card); }
  .shadow-popover { box-shadow: var(--shadow-hover); }

  /* Surfaces and text */
  .bg-app     { background-color: var(--bg-main); }
  .text-app   { color: var(--body-text); }
  .text-muted { color: var(--french-gray-2); }
  .bg-card    { background-color: var(--card-bg); }
  .border-app { border-color: var(--platinum); }
  .bg-surface { background-color: var(--card-bg); }
  .text-var   { color: var(--body-text); }
  .border-var { border-color: var(--platinum); }

  /* Shells */
  .navbar { background-color: var(--sidebar-bg); color: var(--sidebar-fg); }
  .sidebar { background-color: var(--sidebar-bg); color: var(--sidebar-fg); }

  /* Sidebar link styling */
  .sidebar-link { color: var(--sidebar-fg-muted); }
  .sidebar-link:hover { color: var(--sidebar-fg); background-color: color-mix(in srgb, var(--sidebar-fg) 8%, transparent); }
  .sidebar-link-active { color: var(--sidebar-fg); background-color: color-mix(in srgb, var(--sidebar-fg) 12%, transparent); }

  /* Hover/selected state helpers */
  .hover-primary:not(.selected-primary):hover { background-color: var(--slate-gray-lighter); color: var(--seasalt); }
  .selected-primary { background-color: var(--slate-gray); color: var(--seasalt); border-color: var(--slate-gray); }
  /* Treat aria-pressed=true as active for chips */
  .chip[aria-pressed="true"] { background-color: var(--slate-gray); color: var(--seasalt); border-color: var(--slate-gray); box-shadow: var(--shadow-resting); }

  /* Chips */
  /* Inactive/neutral pill with subtle elevation */
  .chip { @apply inline-flex items-center justify-center h-10 px-4 text-sm rounded-full transition;
    background-color: var(--card-bg);
    color: var(--body-text);
    box-shadow: var(--shadow-resting);
  }
  .chip:hover { box-shadow: var(--shadow-hover); background-color: var(--seasalt-lighter); }
  .chip:active { box-shadow: var(--shadow-resting); }
  .chip:focus-visible { outline: 2px solid color-mix(in srgb, var(--slate-gray) 40%, transparent); outline-offset: 0; }
  /* Compact transparent chip cluster (no background strip) */
  .chip-group { @apply inline-flex rounded-lg p-1 gap-2; }

  /* Badges for statuses (use global status palette) */
  .badge { @apply inline-flex items-center rounded-full px-2 py-0.5 text-xs font-medium border; }
  .badge-success { background-color: var(--s-resolved);    color: var(--eerie-black); border-color: color-mix(in srgb, var(--s-resolved) 70%, transparent); }
  .badge-warning { background-color: var(--s-inprogress);  color: var(--eerie-black); border-color: color-mix(in srgb, var(--s-inprogress) 70%, transparent); }
  .badge-danger  { background-color: var(--s-active);      color: var(--eerie-black); border-color: color-mix(in srgb, var(--s-active) 70%, transparent); }
  .badge-hold    { background-color: var(--s-onhold);      color: var(--eerie-black); border-color: color-mix(in srgb, var(--s-onhold) 70%, transparent); }
  /* Neutral */
  .badge-neutral { background-color: var(--seasalt); color: var(--body-text); border-color: var(--platinum); }

  /* Status chip active fills */
  .chip-active-resolved    { background-color: var(--s-resolved);    color: var(--eerie-black); box-shadow: var(--shadow-resting); }
  .chip-active-inprogress  { background-color: var(--s-inprogress);  color: var(--eerie-black); box-shadow: var(--shadow-resting); }
  .chip-active-onhold      { background-color: var(--s-onhold);      color: var(--eerie-black); box-shadow: var(--shadow-resting); }
  .chip-active-active      { background-color: var(--s-active);      color: var(--eerie-black); box-shadow: var(--shadow-resting); }
  .chip-active-resolved:hover,
  .chip-active-inprogress:hover,
  .chip-active-onhold:hover,
  .chip-active-active:hover { box-shadow: var(--shadow-hover); }

  /* Buttons */
  .btn { @apply inline-flex items-center justify-center gap-2 h-10 px-4 rounded-lg text-sm font-medium transition; background-color: var(--button-primary); color: var(--seasalt); box-shadow: var(--shadow-resting); }
  .btn:hover { background-color: var(--button-hover); box-shadow: var(--shadow-hover); transform: translateY(-0.5px); }
  .btn:active { box-shadow: var(--shadow-resting); transform: translateY(0); }
  .btn:disabled { box-shadow: none; cursor: not-allowed; }
  .btn-sm { @apply h-8 px-3 text-xs; }

  .btn-primary, .button-primary { background-color: var(--button-primary); color: var(--seasalt); box-shadow: var(--shadow-resting); }
  .btn-primary:hover, .button-primary:hover { background-color: var(--button-hover); box-shadow: var(--shadow-hover); }

  .btn-secondary, .button-secondary { background-color: var(--french-gray); color: var(--eerie-black); box-shadow: var(--shadow-resting); }
  .btn-secondary:hover, .button-secondary:hover { background-color: var(--french-gray-lighter); box-shadow: var(--shadow-hover); }

  .btn-outline { background-color: transparent; color: var(--slate-gray); border: 1px solid var(--platinum); }
  .btn-outline:hover { background-color: var(--antiflash-white-lighter); }

  .btn-ghost { background-color: transparent; color: var(--body-text); }
  .btn-ghost:hover { background-color: var(--card-bg); box-shadow: inset 0 0 0 1px var(--platinum); }

  /* Cards */
  .card { @apply rounded-2xl border p-4 overflow-hidden; background: var(--card-bg); border-color: var(--platinum); color: var(--body-text); box-shadow: var(--shadow-card); transition: box-shadow 0.2s ease, background-color 0.2s ease; }
  .card:hover { background-color: var(--seasalt-lighter); box-shadow: var(--shadow-card-hover); }

  /* Equal-height widget helper */
  .widget-eq { @apply min-h-[420px] h-full; }
  .widget-eq-body { @apply h-full; }
}
